# @package _global_
# TrackLab SoccerNet config

# The defaults list contains the files that will be used
# to create the final config file. This item *must* be
# the first element in the file.
# Detailed configs for each default component below are located in "sn-gamestate/sn-gamestate/configs" and "tracklab/tracklab/configs"
# Define here which implementation (yolov8, oc_sort, ..) to use for each generic (detection, tracking, ...) component.
defaults:
  - override /dataset: soccernet_gs
  - override /eval: trackeval
  - override /engine: offline
  - override /state: save  # Dump tracking results to a .pcklz file to save computation time on the next run. Have a look at TrackLab tutorials for more details.
  - override /visualization: gamestate  # Save tracking results as a .mp4 video in the run directory specified below (sn-gamestate/outputs/...)
  - override /modules/bbox_detector: yolov8
  - override /modules/reid: prtreid
  - override /modules/track: oc_sort
  - override /modules/pitch : tvcalib
  - override /modules/calibration: tvcalib
  - override /modules/jersey_number_detect: mmocr
  - override /modules/team: kmeans_embeddings
  - override /modules/team_side: mean_position
  - override /modules/tracklet_agg: voting_jn
  - _self_

# Pipeline definition :
# - Defines the order in which the modules will be called
# - If loading a tracking state from disk, remove modules whose outputs are already provided in the loaded state
# Use 'pipeline: []' for an empty pipeline (e.g. when loading all tracking results from a saved .pklz tracker state)
pipeline:
  - jersey_number_detect
  - tracklet_agg



# Experiment name
experiment_name: "individual-modules"

# Flags
test_tracking: True
eval_tracking: True
print_config: False

# Dataset
dataset:
  nvid: -1
  nframes: -1
  eval_set: "test"
  dataset_path: ${data_dir}/SoccerNetGS  # The SoccerNet game state dataset is located under the data path (defined above) in the 'SoccerNetGS' folder
  vids_dict: # Use one key per split (valid, test, etc)
    valid: []  # Specify explicitly which video to apply tracking on, e.g. ['SNGS-04', 'SNGS-51'] . Ignored when left empty.
# Tracker state (save computation time by dumping tracking results on disk for later re-use)
state:
  save_file: null # "states/${experiment_name}.pklz"  # 'null' to disable saving. This is the save path for the tracker_state object that contains all modules outputs (bboxes, reid embeddings, jersey numbers, roles, teams, etc)
  load_from_groundtruth: true
  load_file: null  # 'null' to disable loading. Load a file that was saved with the 'state.save_file' option above. Don't forget to remove from the pipeline all modules that should not be run again, but loaded from the saved tracker state.

# Visualization
visualization:
  cfg:
    save_videos: False  # Save a .mp4 video on disk with the game state reconstruction output (see 'tracklab/tracklab/configs/visualization' for more options)
